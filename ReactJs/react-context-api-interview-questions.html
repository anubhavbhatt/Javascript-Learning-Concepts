<div >
    <h1>React Context API Interview Questions</h1>
    <div><small>Published on
            <!-- -->19 Jan, 2021
        </small></div>
    <p><strong>Question</strong></p>
    <p>What is the purpose of context API in react?</p>
    <p><strong>Solution</strong></p>
    <p>If a child component at nth level require a property from a parent component at any level, the information needs
        to be passed one level by level through props. In an application with lot of nested components, it is difficult.
    </p>
    <p>Context API helps to directly send an information from a parent component to a child component at any level.</p>
    <p><strong>Question</strong></p>
    <p>There are 4 components below which are nested one inside other. The innermost component <code
            >D</code> is displaying the user name from outermost component <code
            >A</code>.</p>
    <div  data-language="javascript">
        <pre ><code ><span >// Component D</span>
<span >class</span> <span >D</span> <span >extends</span> <span >Component</span> <span >{</span>
  <span >render</span><span >(</span><span >)</span> <span >{</span>
    <span >return</span> <span >&lt;</span>div<span >&gt;</span><span >{</span><span >this</span><span >.</span>props<span >.</span>user<span >}</span><span >&lt;</span><span >/</span>div<span >&gt;</span><span >;</span>
  <span >}</span>
<span >}</span>

<span >// Component C</span>
<span >class</span> <span >C</span> <span >extends</span> <span >Component</span> <span >{</span>
  <span >render</span><span >(</span><span >)</span> <span >{</span>
    <span >return</span> <span >(</span>
      <span >&lt;</span>div<span >&gt;</span>
        <span >&lt;</span><span >D</span> user<span >=</span><span >{</span><span >this</span><span >.</span>props<span >.</span>user<span >}</span> <span >/</span><span >&gt;</span>
      <span >&lt;</span><span >/</span>div<span >&gt;</span>
    <span >)</span><span >;</span>
  <span >}</span>
<span >}</span>

<span >// Component B</span>
<span >class</span> <span >B</span> <span >extends</span> <span >Component</span> <span >{</span>
  <span >render</span><span >(</span><span >)</span> <span >{</span>
    <span >return</span> <span >(</span>
      <span >&lt;</span>div<span >&gt;</span>
        <span >&lt;</span><span >C</span> user<span >=</span><span >{</span><span >this</span><span >.</span>props<span >.</span>user<span >}</span> <span >/</span><span >&gt;</span>
      <span >&lt;</span><span >/</span>div<span >&gt;</span>
    <span >)</span><span >;</span>
  <span >}</span>
<span >}</span>

<span >// Component A</span>
<span >export</span> <span >class</span> <span >A</span> <span >extends</span> <span >Component</span> <span >{</span>
  state <span >=</span> <span >{</span>
    user<span >:</span> <span >"Backbencher"</span><span >,</span>
  <span >}</span><span >;</span>

  <span >render</span><span >(</span><span >)</span> <span >{</span>
    <span >return</span> <span >(</span>
      <span >&lt;</span>div<span >&gt;</span>
        <span >&lt;</span><span >B</span> user<span >=</span><span >{</span><span >this</span><span >.</span>state<span >.</span>user<span >}</span> <span >/</span><span >&gt;</span>
      <span >&lt;</span><span >/</span>div<span >&gt;</span>
    <span >)</span><span >;</span>
  <span >}</span>
<span >}</span></code></pre>
    </div>
    <p>Update the code to use Context API to pass user name from component A to component D.</p>
    <p><strong>Solution</strong></p>
    <p>First step is to create a context. So in component A module or file, create a user context like below.</p>
    <div  data-language="javascript">
        <pre
            ><code ><span >const</span> userContext <span >=</span> React<span >.</span><span >createContext</span><span >(</span><span >)</span><span >;</span></code></pre>
    </div>
    <p>Now in the parent component <code >A</code>, wrap all children in <code
            >userContext.Provider</code> tag and supply the value <em>"Backbencher"</em> to be
        passed to component D.</p>
    <div  data-language="javascript">
        <pre
            ><code ><span >&lt;</span>userContext<span >.</span>Provider value<span >=</span><span >{</span><span >this</span><span >.</span>state<span >.</span>user<span >}</span><span >&gt;</span>
  <span >&lt;</span><span >B</span> <span >/</span><span >&gt;</span>
<span >&lt;</span><span >/</span>userContext<span >.</span>Provider<span >&gt;</span></code></pre>
    </div>
    <p>Now we have set everything to pass the user name from component A. Next is to consume it in component D. In order
        to consume the userContext in component D, we need to export it from A and import it in D. Here, since A and D
        are in same file, that is not required.</p>
    <p>Inside component D, we can consume the user name with following syntax.</p>
    <div  data-language="javascript">
        <pre ><code ><span >class</span> <span >D</span> <span >extends</span> <span >Component</span> <span >{</span>
  <span >render</span><span >(</span><span >)</span> <span >{</span>
    <span >return</span> <span >(</span>
      <span >&lt;</span>userContext<span >.</span>Consumer<span >&gt;</span>
        <span >{</span><span >(</span><span >user</span><span >)</span> <span >=&gt;</span> <span >{</span>
          <span >return</span> <span >&lt;</span>div<span >&gt;</span><span >{</span>user<span >}</span><span >&lt;</span><span >/</span>div<span >&gt;</span><span >;</span>
        <span >}</span><span >}</span>
      <span >&lt;</span><span >/</span>userContext<span >.</span>Consumer<span >&gt;</span>
    <span >)</span><span >;</span>
  <span >}</span>
<span >}</span></code></pre>
    </div>
    <p><strong>Question</strong></p>
    <p>Class component, <code >ProviderComponent</code> provides two context values.</p>
    <div  data-language="javascript">
        <pre ><code ><span >export</span> <span >const</span> NameContext <span >=</span> React<span >.</span><span >createContext</span><span >(</span><span >)</span><span >;</span>
<span >export</span> <span >const</span> AgeContext <span >=</span> React<span >.</span><span >createContext</span><span >(</span><span >)</span><span >;</span>

<span >export</span> <span >class</span> <span >ProviderComponent</span> <span >extends</span> <span >Component</span> <span >{</span>
  <span >render</span><span >(</span><span >)</span> <span >{</span>
    <span >return</span> <span >(</span>
      <span >&lt;</span>NameContext<span >.</span>Provider value<span >=</span><span >"Backbencher"</span><span >&gt;</span>
        <span >&lt;</span>AgeContext<span >.</span>Provider value<span >=</span><span >"23"</span><span >&gt;</span>
          <span >&lt;</span>ConsumerComponent <span >/</span><span >&gt;</span>
        <span >&lt;</span><span >/</span>AgeContext<span >.</span>Provider<span >&gt;</span>
      <span >&lt;</span><span >/</span>NameContext<span >.</span>Provider<span >&gt;</span>
    <span >)</span><span >;</span>
  <span >}</span>
<span >}</span></code></pre>
    </div>
    <p>We have <code >ConsumerComponent</code> with following code.</p>
    <div  data-language="javascript">
        <pre ><code ><span >export</span> <span >class</span> <span >ConsumerComponent</span> <span >extends</span> <span >Component</span> <span >{</span>
  <span >render</span><span >(</span><span >)</span> <span >{</span>
    <span >return</span> <span >&lt;</span>div<span >&gt;</span><span >&lt;</span><span >/</span>div<span >&gt;</span><span >;</span>
  <span >}</span>
<span >}</span></code></pre>
    </div>
    <p>Complete <code >ConsumerComponent</code> to consume the context values and display the name
        and age.</p>
    <p><strong>Solution</strong></p>
    <p>First step is to import the context in <code >ConsumerComponent</code>.</p>
    <div  data-language="javascript">
        <pre
            ><code ><span >import</span> <span >{</span> NameContext<span >,</span> AgeContext <span >}</span> <span >from</span> <span >"./ClassContext1"</span><span >;</span></code></pre>
    </div>
    <p>Next we need to write the callback functions to retreive the values from context consumers. Here is the render
        code in <code >ConsumerComponent</code>.</p>
    <div  data-language="javascript">
        <pre ><code ><span >render</span><span >(</span><span >)</span> <span >{</span>
  <span >return</span> <span >(</span>
    <span >&lt;</span>NameContext<span >.</span>Consumer<span >&gt;</span>
      <span >{</span><span >(</span><span >name</span><span >)</span> <span >=&gt;</span> <span >{</span>
        <span >return</span> <span >(</span>
          <span >&lt;</span>AgeContext<span >.</span>Consumer<span >&gt;</span>
            <span >{</span><span >(</span><span >age</span><span >)</span> <span >=&gt;</span> <span >(</span>
              <span >&lt;</span>div<span >&gt;</span>
                Name<span >:</span> <span >{</span>name<span >}</span><span >,</span> Age<span >:</span> <span >{</span>age<span >}</span>
              <span >&lt;</span><span >/</span>div<span >&gt;</span>
            <span >)</span><span >}</span>
          <span >&lt;</span><span >/</span>AgeContext<span >.</span>Consumer<span >&gt;</span>
        <span >)</span><span >;</span>
      <span >}</span><span >}</span>
    <span >&lt;</span><span >/</span>NameContext<span >.</span>Consumer<span >&gt;</span>
  <span >)</span><span >;</span>
<span >}</span></code></pre>
    </div>
    <p>The consuming part looks very length due to nested functions. If we use useContext hook in React, it will be more
        shorter.</p>
    <p><strong>Question</strong></p>
    <p>Here is a code snippet from a Context consumer component.</p>
    <div  data-language="javascript">
        <pre ><code ><span >import</span> <span >{</span> NameContext<span >,</span> AgeContext <span >}</span> <span >from</span> <span >"./ProviderComponent"</span><span >;</span>

<span >export</span> <span >class</span> <span >ConsumerComponent</span> <span >extends</span> <span >Component</span> <span >{</span>
  <span >render</span><span >(</span><span >)</span> <span >{</span>
    <span >return</span> <span >(</span>
      <span >&lt;</span>NameContext<span >.</span>Consumer<span >&gt;</span>
        <span >{</span><span >(</span><span >name</span><span >)</span> <span >=&gt;</span> <span >{</span>
          <span >return</span> <span >(</span>
            <span >&lt;</span>AgeContext<span >.</span>Consumer<span >&gt;</span>
              <span >{</span><span >(</span><span >age</span><span >)</span> <span >=&gt;</span> <span >(</span>
                <span >&lt;</span>div<span >&gt;</span>
                  Name<span >:</span> <span >{</span>name<span >}</span><span >,</span> Age<span >:</span> <span >{</span>age<span >}</span>
                <span >&lt;</span><span >/</span>div<span >&gt;</span>
              <span >)</span><span >}</span>
            <span >&lt;</span><span >/</span>AgeContext<span >.</span>Consumer<span >&gt;</span>
          <span >)</span><span >;</span>
        <span >}</span><span >}</span>
      <span >&lt;</span><span >/</span>NameContext<span >.</span>Consumer<span >&gt;</span>
    <span >)</span><span >;</span>
  <span >}</span>
<span >}</span></code></pre>
    </div>
    <p>Rewrite the <code >ConsumerComponent</code> using <code
            >useContext</code> React hook.</p>
    <p><strong>Solution</strong></p>
    <p>Hooks can be used only in a functional component. The <code >ConsumerComponent</code> can be
        re-written as:</p>
    <div  data-language="javascript">
        <pre ><code ><span >function</span> <span >ConsumerComponent</span><span >(</span><span >)</span> <span >{</span>
  <span >const</span> name <span >=</span> <span >useContext</span><span >(</span>NameContext<span >)</span><span >;</span>
  <span >const</span> age <span >=</span> <span >useContext</span><span >(</span>AgeContext<span >)</span><span >;</span>

  <span >return</span> <span >(</span>
    <span >&lt;</span>div<span >&gt;</span>
      Name<span >:</span> <span >{</span>name<span >}</span><span >,</span> Age<span >:</span> <span >{</span>age<span >}</span>
    <span >&lt;</span><span >/</span>div<span >&gt;</span>
  <span >)</span><span >;</span>
<span >}</span></code></pre>
    </div>
</div>